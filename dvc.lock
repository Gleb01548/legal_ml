schema: '2.0'
stages:
  convert_data:
    cmd: python -m src.pipeline.pipeline_convert_zst_to_parquet
    deps:
    - path: ./data/raw/questions.json.zst
      hash: md5
      md5: 17c42c56fe83c7b8034ea5200a331b1d
      size: 2927732727
    - path: ./src/data/convert_zst_to_perquet_9111_df.py
      hash: md5
      md5: 19194601e6f080966a5cc53a35a23163
      size: 1192
    outs:
    - path: ./data/interim/split_9111_dataset/
      hash: md5
      md5: 192a0f0951c0795036f10ff40f66c720.dir
      size: 6339021234
      nfiles: 12
  prepare_data:
    cmd: python -m src.pipeline.pipeline_prepare_dataset_for_vectorization
    deps:
    - path: ./data/interim/split_9111_dataset/
      hash: md5
      md5: 192a0f0951c0795036f10ff40f66c720.dir
      size: 6339021234
      nfiles: 12
    - path: ./src/data/prepare_dataset_for_vectorization.py
      hash: md5
      md5: 93429e4d5a0487c1c67de6e8940dcf65
      size: 3648
    outs:
    - path: ./data/interim/question_answer_dataset/
      hash: md5
      md5: 32646fada735ec6d54490669cd361d3c.dir
      size: 5423401070
      nfiles: 12
  load_data_in_vector_db:
    cmd: python -m src.pipeline.pipeline_load_data_in_vector_db --collection_name
      911_hybrid_rating_points --min_rating 0.1
    deps:
    - path: ./data/interim/question_answer_dataset/
      hash: md5
      md5: 32646fada735ec6d54490669cd361d3c.dir
      size: 5423401070
      nfiles: 12
    - path: ./src/containers/embeddings_model.py
      hash: md5
      md5: 8c80c29fb6780f28862fbd4f057821b6
      size: 1306
    - path: ./src/data/load_data_in_vector_db.py
      hash: md5
      md5: 6bc96d9a62941d78c48b43a95a400d6a
      size: 5498
    outs:
    - path: ./data/interim/save_time_load_dataset_in_vector_db/
      hash: md5
      md5: 44f8092786ae3eee020664192b93e4b7.dir
      size: 0
      nfiles: 1
  create_prompt_dataset:
    cmd: python -m src.pipeline.pipeline_create_prompt_dataset --num_examples_for_train
      10000 --rating_more 8 --path_save_dataset ./data/processed/10k_8_qwen
    deps:
    - path: ./data/interim/save_time_load_dataset_in_vector_db/
      hash: md5
      md5: 25e808360cb112e76ee257e0741e8f8b.dir
      size: 0
      nfiles: 1
    - path: ./src/features/create_prompt_dataset.py
      hash: md5
      md5: 2c75830369abca8bce3177995211bda9
      size: 4498
    outs:
    - path: ./data/processed/10k_8_qwen
      hash: md5
      md5: efdb7f028ce3eae52293bd35a210b2c4.dir
      size: 101079322
      nfiles: 7
